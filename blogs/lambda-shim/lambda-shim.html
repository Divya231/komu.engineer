<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Komu W - Create an AWS lambda shim for any language.</title>
    <meta name="description" content="Create an AWS lambda shim for any language." />
    <meta property="og:url" content="https://www.komu.engineer/blog" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ADD FAVICON -->

    <link rel="stylesheet" href="../../site.css">

    <!-- Get highlightjs by going to https://highlightjs.org/download/, select the languages you want and download. -->
    <link rel="stylesheet" href="../../highlightjs/styles/default.css">
    <script src="../../highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>

<body>
    <div class="container">
        <div class="header">
            <a href="https://www.komu.engineer">Home</a>&nbsp;&nbsp;
            <a href="https://www.komu.engineer/about">About Me</a>&nbsp;&nbsp;
            <a href="https://www.komu.engineer/blog">Blog</a>&nbsp;&nbsp;
        </div>
        <div class="left-sidebar">
            .
        </div>
        <div class="right-sidebar">
            .
        </div>

        <div class="main">
            <p>
                <strong> Create an AWS lambda shim for any language.(29 September 2018)</strong>
                </br>
                </br>

                <strong>Intro</strong>
                </br>
                <a target="_blank" rel="noopener" href="https://aws.amazon.com/lambda">AWS lambda</a> is a service that
                lets you run code without provisioning or managing servers.</br>
                At the time of writing this blogpost, AWS lambda natively supports <strong>only</strong> the following
                programming
                languages/runtimes; <i>Node.js, Java, Python, .NET
                    Core</i> and <i>Go</i></br>
                Sometimes you may have a usecase for AWS lambda(serverless) but the programming language that you are
                using is not natively supported by AWS lambda.</br>

                If that is the case, worry not; you can still use your favorite programming language with AWS lambda
                even if AWS lambda does not natively support that language. </br>
                In this article, we explore how to do exactly that.

                </br></br>
                <strong>What up now</strong>
                </br>
                Let's say that our favorite programming language is <a target="_blank" rel="noopener" href="https://nim-lang.org">Nim</a>
                and we want to run our program written with Nim on AWS lambda.</br>
                The way to do that(at least the one we will explore in this blog) is by creating a <a target="_blank"
                    rel="noopener" href="https://en.wikipedia.org/wiki/Shim_(computing)">shim</a> using a programming
                language that is already supported on AWS lambda.</br>
                The shim will accept lambda requests, it will then pass those requests to our Nim program and finally
                it will accept/listen for responses from our Nim program and marshal them into a
                form that AWS lambda can understand.</br></br>

                We will use python to create the shim(but you can use any of the other AWS lambda supported languages.)</br>
                The python program/shim;
                <ol>
                    <li>gets a request from AWS lambda.</li>
                    <li>it serializes that request into json.</li>
                    <li>it writes that json into stdin</li>
                    <li>the Nim program reads from stdin</li>
                    <li>it unmarshals what it has read from stdin and acts on it.</li>
                    <li>it creates a json marshaled response</li>
                    <li>it writes that json response to stdout</li>
                    <li>the python program reads that response from stdout</li>
                    <li>it unmarshals what it read(the response)</li>
                    <li>it sends the response back to AWS lambda.</li>
                </ol>

                So the python program and the Nim program communicate using JSON over stdin/stdout. </br>
                <strong>NB:</strong> You do not have to use those if you do not want; you could use some rpc, unix
                sockets etc.


            </p>
        </div>
    </div>
</body>